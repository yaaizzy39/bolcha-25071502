# Webチャットアプリ「Bolcha」要件定義書

*このドキュメントは初期計画時点の要件をベースとしています。開発途中で実装上の変更があった場合でも**現状動作を優先**し、将来の参照用として保存します。*

---

## 1. 概要
本ドキュメントは、多言語対応Webチャットアプリケーション「Bolcha (borderless chat)」の開発に関する要件を定義するものです。

- アプリケーション名: **Bolcha (borderless chat)**
- 目的: 言語の壁を越え、世界中の人々が円滑にコミュニケーションできるWebチャットプラットフォームを提供する。
- ターゲットユーザー: 国際的なコミュニケーションを必要とする、または楽しみたい全てのユーザー。
- 利用環境: PCおよびスマートフォンのWebブラウザ。レスポンシブデザインに対応すること。

## 2. コンセプト
1. **完全無料**: 全ての機能を無料で提供する。
2. **独自翻訳API利用**: 有料翻訳APIを使わず、指定の Google Apps Script (GAS) で自作した翻訳APIを利用して運用コストをゼロに抑える。
3. **ユーザー中心のUI/UX**: 直感的でカスタマイズ性の高いインターフェースを提供する。

## 3. 機能要件
### 3.1 ユーザー管理機能
- **ログイン/認証**: Google アカウント OAuth でログイン。
- **プロフィール設定**
  - プロフィール画像: Google プロフィール画像をデフォルトに、ユーザーアップロード可 (PNG/JPEG)。
  - メッセージ表示位置: 自分の投稿を右/左に切替可能。
  - 原文併記 ON/OFF。

### 3.2 チャットルーム機能
- **チャットルーム作成**: 認証ユーザーは自由に作成。作成時に自動削除警告表示。
- **チャットルーム削除**: 作成者/管理者のみ。
- **チャットルーム自動削除**: 最終投稿から一定時間 (例 48h) 無投稿なら自動削除。

### 3.3 メッセージング・翻訳機能
- **テキスト送受信**。
- **多言語翻訳**
  - 画面上部に言語ドロップダウン。
  - 選択言語変更で表示中メッセージを即座に再翻訳。
- **翻訳API効率化**
  - 外部有料APIは使用しない。
  - 新しいメッセージ優先で翻訳。
  - 翻訳完了順に逐次表示。
  - Lazy Loading: 可視または近接メッセージのみ翻訳。
- **メッセージ表示**
  - 他ユーザー: 左側固定。
  - 自分のメッセージ: ユーザー設定に従う。
  - 原文併記: 色を抑えて表示。ON/OFF 可能。

### 3.4 メッセージインタラクション機能
- 投稿時刻表示
- 削除 (自分のメッセージのみ)
- 返信
- いいね
  - いずれもホバー/タップでボタン表示

## 4. 管理者機能
- **GAS翻訳API管理**: 複数GAS URLの追加/編集/削除。負荷分散に利用。
- **チャットルーム自動削除設定**: 非アクティブ期間（日数）を設定可能。
- **チャットルーム強制削除**: 一覧から任意ルームを削除。

## 5. 非機能要件
- **対応プラットフォーム**: PC (Chrome, Firefox, Safari, Edge 最新) / スマホ (iOS Safari, Android Chrome 最新)。
- **パフォーマンス**: リアルタイム通信と翻訳処理で遅延を最小化。
- **セキュリティ**: OAuth の安全実装、XSS 等対策。
- **コスト**: インフラ/翻訳とも運用コストゼロ (自作GAS使用)。

---

> **備考:** 今後の開発で要件が変更されても、既存システムの動作を優先し、破壊的変更は避けること。
